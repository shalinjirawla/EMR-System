<form class="form-horizontal d-flex flex-column" style="height: 90vh; display: flex; flex-direction: column;"
    autocomplete="off" #labTestForm="ngForm" (ngSubmit)="save()">
    
    <abp-modal-header style="flex: 0 0 auto;" [title]="id ? 'Edit Lab Test' : 'Create Lab Tests'"
        (onCloseClick)="bsModalRef.hide()"></abp-modal-header>

    <div class="modal-body flex-grow-1" style="overflow-y: auto; padding-right: 15px;">
        <div class="form-group" *ngIf="!id">
            <label><b>Test Names *</b></label>
            <p-autoComplete [(ngModel)]="selectedTestNames" name="testNames" [suggestions]="filteredTestNames"
                (completeMethod)="filterTestNames($event)" [multiple]="true" [typeahead]="false"
                placeholder="Enter or select multiple test names" class="w-100" required></p-autoComplete>
        </div>

        <div class="form-group" *ngIf="id">
            <label for="testName"><b>Name *</b></label>
            <input pInputText type="text" id="testName" name="testName" class="form-control" [(ngModel)]="labTest.name"
                required maxlength="100" placeholder="Enter test name" />
        </div>
        <div class="form-group">
            <label for="unitId"><b>Unit *</b></label>
            <p-dropdown id="unitId" name="unitId" [options]="measureUnits" [(ngModel)]="selectedUnitId"
                optionLabel="name" optionValue="id" placeholder="Select unit" class="w-100"></p-dropdown>

        </div>

        <div class="form-group">
            <label for="isActive"><b>Active</b></label>
            <p-checkbox inputId="isActive" name="isActive" [(ngModel)]="isActive" binary="true"></p-checkbox>
        </div>
    </div>

    <abp-modal-footer style="flex: 0 0 auto;" [cancelDisabled]="saving" [saveDisabled]="!isFormValid || saving"
        (onCancelClick)="bsModalRef.hide()"></abp-modal-footer>
</form>