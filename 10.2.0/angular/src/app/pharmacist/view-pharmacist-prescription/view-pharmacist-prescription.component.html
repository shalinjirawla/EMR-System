<div class="prescription-container" *ngIf="prescription">
  <!-- Header -->
  <div class="header">
    <h2 class="clinic-name">{{ prescription.tenantName }}</h2>
    <p class="sub">Receipt #: {{ prescription.receiptNumber }}</p>
  </div>

  <!-- Patient & Doctor Info -->
  <div class="grid">
    <div class="card-section">
      <h4>ðŸ‘¤ Patient Info</h4>
      <p><strong>Patient ID:</strong> {{ prescription.patientId }}</p>
      <p><strong>Name:</strong> {{ prescription.patientName }}</p>
      <p><strong>DOB:</strong> {{ prescription.patientDateOfBirth | date:"dd/MM/yyyy" }}</p>
      <p><strong>Gender:</strong> {{ prescription.gender }}</p>
    </div>

    <div class="card-section">
      <h4>ðŸ©º Doctor Info</h4>
      <p><strong>Name:</strong> Dr. {{ prescription.doctorName }}</p>
      <p><strong>Reg No:</strong> {{ prescription.doctorRegistrationNumber }}</p>
      <p><strong>Issue Date:</strong> {{ prescription.issueDate | date:"dd/MM/yyyy hh:mm a" }}</p>
    </div>
  </div>

  <!-- Medicines -->
  <div class="card-section" style="margin-bottom: 20px;">
    <h4>ðŸ’Š Prescribed Medicines</h4>
    <div class="table-responsive">
      <table class="medicine-table">
        <thead>
          <tr>
            <th>Medicine</th>
            <th>Dosage</th>
            <th>Frequency</th>
            <th>Duration</th>
            <th>Instructions</th>
            <th>Qty</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of prescription.prescriptionItems">
            <td>{{ item.medicineName }}</td>
            <td>{{ item.dosage }}</td>
            <td>{{ item.frequency }}</td>
            <td>{{ item.duration }}</td>
            <td>{{ item.instructions }}</td>
            <td>{{ item.qty }}</td>
            <td>{{ item.unitPrice | currency:"INR" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Payment & Pickup -->
  <div class="grid">
    <div class="card-section">
      <h4>ðŸ’³ Payment</h4>
      <p>
        <strong>Status:</strong>&nbsp;
        <span class="badge" [ngClass]="prescription.isPaid ? 'success' : 'danger'">
          {{ prescription.isPaid ? "Paid" : "Unpaid" }}
        </span>
      </p>
      <p>
        <strong>Grand Total:</strong>
        <span class="total-amount">{{ prescription.grandTotal | currency:"INR" }}</span>
      </p>
    </div>

    <div class="card-section">
      <h4>ðŸ“¦ Pickup</h4>
      <p>
        <strong>Status:</strong>&nbsp;
        <span class="badge" [ngClass]="prescription.collectionStatus === 1 ? 'info' : 'warning'">
          {{ prescription.collectionStatus === 1 ? "Collected" : "Pending" }}
        </span>
      </p>
      <p *ngIf="prescription.pickedUpByNurseId">
        <strong>Picked Up By:</strong> {{ prescription.pickedUpByNurse }} (Nurse)
      </p>
      <p *ngIf="prescription.pickedUpByPatientId">
        <strong>Picked Up By:</strong> {{ prescription.pickedUpByPatient }} (Patient)
      </p>
      <p><strong>Notes:</strong> {{ prescription.pharmacyNotes || "-" }}</p>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Prescribed & Signed By</p>
    <h5>Dr. {{ prescription.doctorName }}</h5>
    <small>Reg No: {{ prescription.doctorRegistrationNumber }}</small>
  </div>
</div>
