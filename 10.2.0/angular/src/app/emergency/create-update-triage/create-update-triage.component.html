<form class="form-horizontal" autocomplete="off" #createTriageForm="ngForm" (ngSubmit)="save()">
  <abp-modal-header title="Create Triage" (onCloseClick)="bsModalRef.hide()"></abp-modal-header>

  <div class="modal-body">
    <div class="row">
      <div class="col-md-12">
        <label><b>Select Emergency Case</b></label>
        <p-select 
          [options]="emergencyCases" 
          optionLabel="emergencyNumber" 
          placeholder="Select emergency case"
          [optionValue]="'id'" 
          [(ngModel)]="triage.emergencyCaseId" 
          name="emergencyCaseId" 
          class="w-100" required />
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-6">
        <label>Temperature (Â°C)</label>
        <input type="number" [(ngModel)]="triage.temperature" name="temperature" class="form-control" step="0.1" required />
      </div>
      <div class="col-md-6">
        <label>Pulse (bpm)</label>
        <input type="number" [(ngModel)]="triage.pulse" name="pulse" class="form-control" required />
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-6">
        <label>Respiratory Rate</label>
        <input type="number" [(ngModel)]="triage.respiratoryRate" name="respiratoryRate" class="form-control" required />
      </div>
      <div class="col-md-6">
        <label>Blood Pressure (Systolic/Diastolic)</label>
        <div class="d-flex">
          <input type="number" [(ngModel)]="triage.bloodPressureSystolic" name="bpSystolic" class="form-control me-2" placeholder="Systolic" required />
          <input type="number" [(ngModel)]="triage.bloodPressureDiastolic" name="bpDiastolic" class="form-control" placeholder="Diastolic" required />
        </div>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <label>Notes</label>
        <textarea [(ngModel)]="triage.notes" name="notes" class="form-control" rows="3"></textarea>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <label>Assessment Time</label>
        <p-datepicker 
          [(ngModel)]="uiAssessmentTime" 
          name="assessmentTime"
          [showIcon]="true" 
          showTime="true"
          placeholder="Select assessment time"
          required />
      </div>
    </div>
  </div>

  <abp-modal-footer 
    [cancelDisabled]="saving" 
    [saveDisabled]="!createTriageForm.form.valid || saving"
    (onCancelClick)="bsModalRef.hide()">
  </abp-modal-footer>
</form>
