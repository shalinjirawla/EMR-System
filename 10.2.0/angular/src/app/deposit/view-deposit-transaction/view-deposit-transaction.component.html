<abp-modal-header [title]="'Deposit Transactions - ' + patientName" (onCloseClick)="close()"></abp-modal-header>

<div class="p-3">

  <!-- ðŸ”¹ Summary Cards -->
  <div class="row mb-3 transaction-summary">
    <div class="col-md-4">
      <div class="card summary-card credit">
        <div class="card-body text-center">
          <h6 class="mb-1">Total Credit</h6>
          <h5 class="fw-bold">â‚¹ {{ totalCredit | number:'1.0-2' }}</h5>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card summary-card debit">
        <div class="card-body text-center">
          <h6 class="mb-1">Total Debit</h6>
          <h5 class="fw-bold">â‚¹ {{ totalDebit | number:'1.0-2' }}</h5>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card summary-card balance">
        <div class="card-body text-center">
          <h6 class="mb-1">Net Balance</h6>
          <h5 class="fw-bold" [ngClass]="netBalance >= 0 ? 'text-success' : 'text-danger'">
            â‚¹ {{ netBalance | number:'1.0-2' }}
          </h5>
        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ”¹ Transactions Table -->
  <p-table
    [value]="transactions"
    [tableStyle]="{ 'min-width': '55rem' }"
    styleClass="p-datatable-striped p-datatable-sm custom-transaction-table"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="text-center">Description</th>
        <th class="text-center">Amount</th>
        <th class="text-center">Date</th>
        <th class="text-center">Receipt No</th>
        <th class="text-center">Transaction Type</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-t>
      <tr>
        <td  class="text-center">{{ t.description }}</td>
        <td class="text-center fw-bold">â‚¹ {{ t.amount | number:'1.0-2' }}</td>
        <td class="text-center">{{ t.transactionDate | date: 'dd MMM yyyy, hh:mm a' }}</td>
        <td class="text-center">{{ t.receiptNo || '-' }}</td>
        <td class="text-center">
          <p-tag [value]="getTransactionTypeLabel(t.transactionType)"
                 [severity]="t.transactionType === 0 ? 'success' : 'danger'">
          </p-tag>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

